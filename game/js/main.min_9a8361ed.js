var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))(function(a,h){function n(t){try{r(s.next(t))}catch(e){h(e)}}function o(t){try{r(s["throw"](t))}catch(e){h(e)}}function r(t){t.done?a(t.value):new i(function(e){e(t.value)}).then(n,o)}r((s=s.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return s([t,e])}}function s(i){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,h&&(n=h[2&i[0]?"return":i[0]?"throw":"next"])&&!(n=n.call(h,i[1])).done)return n;switch(h=0,n&&(i=[0,n.value]),i[0]){case 0:case 1:n=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,h=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(n=r.trys,!(n=n.length>0&&n[n.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){r.label=i[1];break}if(6===i[0]&&r.label<n[1]){r.label=n[1],n=i;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(i);break}n[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],h=0}finally{a=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var a,h,n,o,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o},Basket=function(){function t(t){this.n=t,this.willCollide=!0,this.horizontalOffset=400,this.main=Main.instance,this.basketBack=new egret.Bitmap(RES.getRes("circleBack_png")),this.basket=new egret.Bitmap(RES.getRes("circleFront_png")),this.main.onEnterGameState.push(this),this.main.toUpdate.push(this);var e=this.main.getChildIndex(this.main.ball.ball);this.main.addChildAt(this.basketBack,e-1),this.main.addChild(this.basket),this.basket.alpha=this.basketBack.alpha=0}return t.prototype.onEnterGameState=function(){this.willCollide=!0,this.basket.alpha=this.basketBack.alpha=1;var t=this.basket,e=this.basketBack;t.height=e.height=56,t.width=e.width=130,t.anchorOffsetX=e.anchorOffsetX=t.width/2,t.anchorOffsetY=e.anchorOffsetY=t.height/2,t.x=e.x=this.horizontalOffset+(this.n+1)*this.main.horizontalOffset,t.y=e.y=this.horizontalOffset,this.setRandomY()},t.prototype.update=function(t){this.main.isSimulating&&(this.basket.x-=this.main.simulationSpeed*t,this.basketBack.x-=this.main.simulationSpeed*t,this.basket.x+this.basket.width<0&&(this.basket.x+=this.main.horizontalOffset*this.main.baskets.length,this.basketBack.x+=this.main.horizontalOffset*this.main.baskets.length,this.willCollide=!0,this.basketBack.alpha=this.basket.alpha=1,this.setRandomY(),null!=this.onMoveRight&&this.onMoveRight.onMoveRight(this))),this.willCollide||this.basket.alpha>0&&(this.basketBack.alpha-=2*t,this.basket.alpha-=2*t)},t.prototype.setRandomY=function(){var t=Math.random(),e=this.main.stage.stageHeight/4+t*this.main.stage.stageHeight/3;this.basket.y=this.basketBack.y=e},t}();__reflect(Basket.prototype,"Basket",["IUpdatable","IOnEnterGameState"]);var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function s(s){e.call(i,s,t)}if(RES.hasRes(t)){var a=RES.getRes(t);a?s(a):RES.getResAsync(t,s,this)}else RES.getResByUrl(t,s,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Main=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.simulationSpeed=200,e.timeOnEnterFrame=0,e.onEnterGameState=[],e.toUpdate=[],e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(i){switch(i.label){case 0:return e.instance=this,[4,this.loadResource()];case 1:return i.sent(),this.createGameScene(),[4,platform.login()];case 2:return i.sent(),[4,platform.getUserInfo()];case 3:return t=i.sent(),console.log(t),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),t=new LoadingUI,this.stage.addChild(t),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,this.loadTheme()];case 2:return i.sent(),[4,RES.loadGroup("preload",0,t)];case 3:return i.sent(),this.stage.removeChild(t),[3,5];case 4:return e=i.sent(),console.error(e),[3,5];case 5:return[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,i){var s=new eui.Theme("resource/default.thm.json",t.stage);s.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.createGameScene=function(){this.awake(),egret.startTick(this.allUpdate,this)},e.prototype.awake=function(){this.horizontalOffset=this.stage.stageWidth/3*2,this.background=new Background,this.bar=new Bar,new Clouds(8,!0),new Clouds(8,!1),this.mushroom=new Mushroom,this.ball=new Ball,this.baskets=[new Basket(0),new Basket(1)],this.floating=new Floating,this.score=new Score,this.bestscore=new BestScore,this.startingUI=new StartingUI},e.prototype.allEnterGameState=function(){this.isSimulating=!0,this.timeOnEnterFrame=egret.getTimer();for(var t=0;t<this.onEnterGameState.length;t++)this.onEnterGameState[t].onEnterGameState()},e.prototype.allUpdate=function(t){var e=t,i=e-this.timeOnEnterFrame;this.timeOnEnterFrame=e;for(var s=0;s<this.toUpdate.length;s++)this.toUpdate[s].update(i/1e3);return this.touched=!1,this.scored=!1,!0},e}(eui.UILayer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,s){function a(t){e.call(s,t)}function h(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,h,null),i.call(s))}"undefined"!=typeof generateEUI?egret.callLater(function(){e.call(s,generateEUI)},this):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,h,null),RES.getResByUrl(t,a,this,RES.ResourceItem.TYPE_TEXT))},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var Background=function(){function t(){this.speed=2,this.main=Main.instance,this.bg=new egret.Bitmap(RES.getRes("background_jpg")),this.bg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),this.bg.touchEnabled=!0,this.main.onEnterGameState.push(this),this.main.toUpdate.push(this),this.main.addChild(this.bg),this.onEnterGameState()}return t.prototype.onEnterGameState=function(){var t=736/552;this.bg.x=0,this.bg.height=this.main.stage.stageHeight,this.bg.width=t*this.bg.height},t.prototype.touchHandler=function(t){this.main.touched=!0,this.main.touchX=t.localX,this.main.touchY=t.localY},t.prototype.update=function(t){},t}();__reflect(Background.prototype,"Background",["IUpdatable","IOnEnterGameState"]);var Ball=function(){function t(){this.main=Main.instance,this.size=60,this.particleNumber=12,this.initialVelocity=-800,this.acceleration=2600,this.timeAccumulated=0,this.particleSpeed=160,this.shrinkSpeed=50,this.elasticity=.5,this.colliderRadius=10,this.main.toUpdate.push(this),this.normaleye=RES.getRes("player_png"),this.bigeye=RES.getRes("bigeye_png"),this.noeye=RES.getRes("noeye_png"),this.ball=new egret.Bitmap(this.normaleye),this.ball.width=this.ball.height=2*this.size,this.ball.alpha=0,this.main.addChild(this.ball),this.main.onEnterGameState.push(this),this.particles=[];for(var t=0;t<this.particleNumber;t++){var e=new egret.Bitmap(this.noeye);this.particles.push(e),e.width=e.height=20,e.anchorOffsetX=e.anchorOffsetY=e.width/2,this.particles[t].alpha=0,this.main.addChild(this.particles[t])}}return t.prototype.onEnterGameState=function(){this.ball.alpha=1,this.ball.width=this.ball.height=this.size,this.ball.x=3*this.size,this.ball.y=.4*this.main.stage.stageHeight,this.ball.anchorOffsetX=this.ball.width/2,this.ball.anchorOffsetY=this.ball.height/2,this.vx=0,this.vy=this.initialVelocity,this.isDead=!1,this.ball.texture=this.normaleye;for(var t=0;t<this.particleNumber;t++)this.particles[t].alpha=0},t.prototype.update=function(t){this.explodeAnmationUpdate(),this.timeAccumulated+=t,this.ball.rotation=15+30*Math.sin(3*this.timeAccumulated),this.main.isInGameState&&(this.delta=t,this.main.isSimulating||(this.ball.x+=this.vx*t),this.ball.y+=this.vy*t,this.vy+=this.acceleration*t,this.main.touched&&this.main.isSimulating&&(SoundController.getInstance().playWing(),this.vy=this.initialVelocity,this.vx=0),this.isDead?this.ball.width>0&&(this.ball.width-=t*this.shrinkSpeed,this.ball.height-=t*this.shrinkSpeed):this.deathCheck(),this.basketsCollisionCheck(),this.scoreCheck())},t.prototype.explodeAnmationUpdate=function(){if(this.isDead){for(var t=2*Math.PI/this.particles.length,e=0;e<this.particles.length;e++){var i=this.particles[e];i.x+=(.5+this.particleSpeedArray[2*e])*this.particleSpeed*this.delta*Math.cos(e*t),i.y+=(.5+this.particleSpeedArray[2*e+1])*this.particleSpeed*this.delta*Math.sin(e*t)}this.particleFallingVelocity+=this.delta*this.acceleration}},t.prototype.basketsCollisionCheck=function(){for(var t=this.main.baskets,e=0;e<t.length;e++)this.basketCollisionCheck(t[e])},t.prototype.basketCollisionCheck=function(t){for(var e=0;2>e;e++)if(t.willCollide){var i=t.basket.x+(0==e?-t.basket.width/2+this.colliderRadius:t.basket.width/2-this.colliderRadius),s=t.basket.y,a=i-this.ball.x,h=s-this.ball.y,n=this.square(a)+this.square(h),o=Math.sqrt(this.square(this.vx)+this.square(this.vy));if(n<this.square(this.ball.width/2+this.colliderRadius)&&(this.main.isSimulating=!1,this.ball.texture=this.bigeye,this.vx*a+this.vy*h>0)){var r=Math.sqrt(a*a+h*h);a/=r,h/=r,this.vx=-o*a*this.elasticity,this.vy=-o*h*this.elasticity,SoundController.getInstance().playHit(),this.hited=!0}}},t.prototype.scoreCheck=function(){for(var t=0;2>t;t++){var e=this.main.baskets[t];if(e.willCollide){var i=this.ball.x-this.vx*this.delta;if(this.ball.x>e.basket.x-e.basket.width/2+this.colliderRadius&&this.ball.x<e.basket.x+e.basket.width/2-this.colliderRadius||i>e.basket.x-e.basket.width/2+this.colliderRadius&&i<e.basket.x+e.basket.width/2-this.colliderRadius){var s=this.ball.y-this.vy*this.delta,a=this.ball.y+this.vy*this.delta;this.vy;a>=e.basket.y&&s<=e.basket.y?this.score(2,e):a<=e.basket.y&&s>=e.basket.y&&this.score(3,e)}var h=this.main.mushroom.mushroom,n=this.square(h.x-this.ball.x)+this.square(h.y-this.ball.y);n<this.square(this.ball.width/2+h.width/2-10)&&(this.main.score.score+=1,this.main.floating.inform(1),h.alpha=0,h.x=-200,this.main.mushroom.currentFollowingBasket=null,SoundController.getInstance().playSwooshing())}}},t.prototype.score=function(t,e){this.main.floating.inform(t),!this.hited,this.hited=!1,this.vy=.6*this.vy,e.willCollide=!1,this.main.scored=!0,this.main.score.score+=t,this.ball.x=3*this.size,this.main.isSimulating=!0,this.ball.texture=this.normaleye,this.main.bar.activated=!1},t.prototype.square=function(t){return t*t},t.prototype.deathCheck=function(){var t=30;this.main.bar.activated&&this.ball.x>this.main.bar.barLower.x?this.onDeath():this.ball.y-this.ball.height/2<t&&this.vy<0?this.onDeath():this.ball.y+this.ball.height/2>this.main.stage.stageHeight-3*t&&this.vy>0?this.onDeath():this.ball.x-this.ball.width/2<0&&this.vx<0?this.onDeath():this.ball.x+this.ball.width/2>this.main.stage.stageWidth&&this.vx>0&&this.onDeath()},t.prototype.onDeath=function(){this.main.startingUI.setToStartUI(),this.main.bar.onEnterGameState(),SoundController.getInstance().playDie();for(var t=0;t<this.main.baskets.length;t++)this.main.baskets[t].onEnterGameState();this.timeAccumulated=0,this.isDead=!0,this.ball.alpha=0,this.particleSpeedArray=[],this.particleAngleOffsetArray=[];for(var t=0;t<this.particles.length;t++){var e=this.particles[t];e.alpha=1,e.x=this.ball.x,e.y=this.ball.y,this.particleSpeedArray.push(Math.random()),this.particleSpeedArray.push(Math.random()),e.alpha=.2+.8*Math.random(),this.particleAngleOffsetArray.push(2*Math.PI/this.particles.length*Math.random())}this.particleFallingVelocity=0,this.main.isSimulating=!1,this.main.mushroom.mushroom.alpha=0},t}();__reflect(Ball.prototype,"Ball",["IUpdatable","IOnEnterGameState"]);var Bar=function(){function t(){this.barHorizontalOffset=400,this.fadeSpeed=1e3,this.main=Main.instance,this.barUpper=new egret.Bitmap(RES.getRes("bar_png")),this.barLower=new egret.Bitmap(RES.getRes("bar_png")),this.barLower.width=this.barUpper.width=70,this.barLower.height=this.barUpper.height=560,this.barLower.alpha=this.barUpper.alpha=0,this.main.addChild(this.barUpper),this.main.addChild(this.barLower),this.main.onEnterGameState.push(this),this.main.toUpdate.push(this)}return t.prototype.onEnterGameState=function(){this.reactive(),this.barLower.alpha=this.barUpper.alpha=1,this.barUpper.x=this.barLower.x=this.barHorizontalOffset+1.2*this.main.horizontalOffset},t.prototype.update=function(t){this.main.isSimulating&&(this.barLower.x-=this.main.simulationSpeed*t,this.barUpper.x-=this.main.simulationSpeed*t),this.main.scored&&(this.activated=!1,SoundController.getInstance().playSwooshing()),this.activated||(this.barUpper.y-=this.fadeSpeed*t,this.barLower.y+=this.fadeSpeed*t,this.barUpper.y+this.barUpper.height<0&&(this.barLower.x+=this.main.horizontalOffset,this.barUpper.x+=this.main.horizontalOffset,this.reactive()))},t.prototype.reactive=function(){this.barLower.y=this.main.stage.stageHeight/2,this.barUpper.y=0,this.activated=!0},t}();__reflect(Bar.prototype,"Bar",["IUpdatable","IOnEnterGameState"]);var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.onProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var Clouds=function(){function t(t,e){this.n=t,this.stackingPixels=5;var i=this.main=Main.instance;i.toUpdate.push(this),this.clouds=[];for(var s=RES.getRes("bottom_png"),a=0;a<this.n;a++){var h=void 0;h=new egret.Bitmap(s),this.clouds[a]=h,this.clouds[a]=h,h.width=177,h.height=122,h.x=a*(h.width-this.stackingPixels),e?h.y=i.stage.stageHeight-h.height:(h.y=h.height/2,h.rotation=180),i.addChild(h)}}return t.prototype.onEnterGameState=function(){for(var t=0;t<this.n;t++)this.clouds[t].alpha=1},t.prototype.update=function(t){if(this.main.isSimulating)for(var e=0;e<this.n;e++){var i=this.clouds[e];i.x-=this.main.simulationSpeed*t,i.x+i.width<0&&(i.x+=(this.n-1)*(i.width-this.stackingPixels))}},t}();__reflect(Clouds.prototype,"Clouds",["IUpdatable","IOnEnterGameState"]);var Collision=function(){function t(){}return t}();__reflect(Collision.prototype,"Collision");var Floating=function(){function t(){this.main=Main.instance,this.text=new egret.TextField,this.text.size=36,this.text.width=50,this.text.textColor=15028034,this.text.anchorOffsetX=this.text.width/2,this.animating=!0,this.main.toUpdate.push(this),this.main.onEnterGameState.push(this),this.main.addChild(this.text)}return t.prototype.onEnterGameState=function(){},t.prototype.update=function(t){if(this.animating){var e=this.main.ball.ball;this.text.x=e.x,this.text.y=e.y-e.height,this.text.alpha-=t}},t.prototype.inform=function(t){this.text.textColor=1==t?15028034:1021840,this.text.text="+"+t.toString(),this.text.alpha=1},t}();__reflect(Floating.prototype,"Floating",["IOnEnterGameState","IUpdatable"]);var Mushroom=function(){function t(){this.mushroomWidthOffset=130,this.mushroomProbability=.8,this.mushroomHeightOffset=200,this.main=Main.instance;var t=this.mushroom=new egret.Bitmap(RES.getRes("bonus_png"));t.alpha=0,t.x=-200,t.width=100,t.height=104,t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,this.main.addChild(t),this.main.onEnterGameState.push(this),this.main.toUpdate.push(this)}return t.prototype.onEnterGameState=function(){this.timeAccumulatedWithoutMushroom=0,this.mushroom.alpha=0;for(var t=0;t<this.main.baskets.length;t++)this.main.baskets[t].onMoveRight=this},t.prototype.update=function(t){if(this.timeAccumulatedWithoutMushroom+=t,this.main.isSimulating&&null!=this.currentFollowingBasket&&(this.mushroom.x=this.currentFollowingBasket.basket.x-this.mushroomWidthOffset,this.mushroom.x+this.mushroom.width<0&&(this.currentFollowingBasket=null,this.mushroomComingIntoBeing=!1,this.mushroom.alpha=0)),this.mushroomComingIntoBeing){var e=this.mushroom.alpha+2*t;this.mushroom.alpha=e>1?1:e,e>1?(this.mushroom.alpha=1,this.mushroomComingIntoBeing=!1):this.mushroom.alpha=e}},t.prototype.onMoveRight=function(t){null==this.currentFollowingBasket&&Math.random()<this.mushroomProbability&&(this.currentFollowingBasket=t,this.mushroom.y=this.currentFollowingBasket.basket.y+Math.random()*this.mushroomHeightOffset,this.mushroomComingIntoBeing=!0)},t}();__reflect(Mushroom.prototype,"Mushroom",["IOnEnterGameState","IUpdatable","IOnMoveRight"]);var Score=function(){function t(){this.main=Main.instance,this.text=new egret.TextField,this.text.textColor=0,this.text.x=50,this.text.y=this.main.stage.stageHeight/8,this.text.size=this.main.stage.stageWidth/8,this.main.onEnterGameState.push(this),this.main.toUpdate.push(this),this.main.addChild(this.text)}return t.prototype.onEnterGameState=function(){this.score=0},t.prototype.update=function(){this.main.isInGameState&&(this.text.text=this.score.toString(),this.text.anchorOffsetX=this.text.width/2)},t}();__reflect(Score.prototype,"Score",["IOnEnterGameState","IUpdatable"]);var BestScore=function(){function t(){this.score=0,this.main=Main.instance,this.text=new egret.TextField,this.text.textAlign="center",this.text.width=this.main.stage.stageWidth,this.text.size=this.main.stage.stageWidth/16,this.text.y=this.main.stage.stageHeight-this.text.size-25,this.main.onEnterGameState.push(this),this.main.toUpdate.push(this),this.main.addChild(this.text),this.loadScore()}return t.prototype.onEnterGameState=function(){},t.prototype.update=function(){this.main.isInGameState&&this.score<this.main.score.score&&(this.score=this.main.score.score,this.saveScore(),this.text.text="HIGH SCORE : "+this.score.toString())},t.prototype.loadScore=function(){var t=egret.localStorage.getItem("HOPHOP_BEST");t||(t="0"),this.score=parseInt(t),this.text.text="HIGH SCORE : "+this.score.toString()},t.prototype.saveScore=function(){egret.localStorage.setItem("HOPHOP_BEST",this.score.toString())},t}();__reflect(BestScore.prototype,"BestScore",["IOnEnterGameState","IUpdatable"]);var SoundController=function(){function t(){this.die=RES.getRes("die_m4a"),this.hit=RES.getRes("hit_m4a"),this.perfect=RES.getRes("perfect_m4a"),this.swooshing=RES.getRes("swooshing_m4a"),this.wing=RES.getRes("wing_m4a")}return t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},t.prototype.playDie=function(){this.die.play(0,1)},t.prototype.playHit=function(){this.hit.play(0,1)},t.prototype.playPerfect=function(){this.perfect.play(0,1)},t.prototype.playSwooshing=function(){this.swooshing.play(0,1)},t.prototype.playWing=function(){this.wing.play(0,1)},t._instance=null,t}();__reflect(SoundController.prototype,"SoundController");var StartingUI=function(){function t(){this.startButtonSpeed=2e3;var t=this.main=Main.instance,e=this.hophop=new egret.Bitmap(RES.getRes("logo_png"));this.hophop.width=400,this.hophop.height=153,e.anchorOffsetX=this.hophop.width/2,e.anchorOffsetY=this.hophop.height/2,e.x=t.stage.stageWidth/2,e.y=t.stage.stageHeight/5,t.addChild(this.hophop);var i=this.hint=new egret.Bitmap(RES.getRes("hint_png"));i.width=433,i.height=296,i.anchorOffsetX=this.hophop.width/2,i.anchorOffsetY=this.hophop.height/2,i.x=t.stage.stageWidth/2,i.y=t.stage.stageHeight/2,this.hint.alpha=0,t.addChild(i);var s=this.startButton=new egret.Bitmap(RES.getRes("start_jpg"));s.anchorOffsetX=this.startButton.width/2,s.anchorOffsetY=this.startButton.height/2,s.x=t.stage.stageWidth/2,s.y=t.stage.stageHeight/2,t.addChild(s),this.setToStartUI(),t.toUpdate.push(this),t.onEnterGameState.push(this)}return t.prototype.onEnterGameState=function(){this.hint.alpha=0,this.main.background.bg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.setToGameState,this)},t.prototype.update=function(t){if(this.transitionToHintUI)this.startButton.x+this.startButton.width/2<this.main.stage.stageWidth?this.startButton.x+=t*this.startButtonSpeed:(this.transitionToHintUI=!1,this.startButton.alpha=0);else if(this.transitionToStartUI){var e=this.startButton.x+t*this.startButtonSpeed;e<this.main.stage.stageWidth/2?this.startButton.x=e:(this.startButton.x=this.main.stage.stageWidth/2,this.transitionToStartUI=!1),this.hophop.x=this.startButton.x}},t.prototype.setToHintUI=function(){this.transitionToStartUI||(this.transitionToHintUI=!0,this.startButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.setToHintUI,this),this.startButton.touchEnabled=!1,this.hint.alpha=1,this.main.background.bg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.setToGameState,this),this.main.ball.onEnterGameState(),this.main.score.text.visible=!0,this.main.bestscore.text.visible=!1)},t.prototype.setToStartUI=function(){this.transitionToStartUI=!0,this.main.isInGameState=!1,this.hophop.alpha=this.startButton.alpha=1,this.startButton.touchEnabled=!0,this.startButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.setToHintUI,this),this.hophop.x=this.startButton.x=-this.startButton.width,this.main.score.text.visible=!1,this.main.bestscore.text.visible=!0},t.prototype.setToGameState=function(){this.hophop.alpha=0,this.main.isInGameState=!0,this.main.allEnterGameState()},t}();__reflect(StartingUI.prototype,"StartingUI",["IOnEnterGameState","IUpdatable"]);